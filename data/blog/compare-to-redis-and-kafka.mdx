---
title: redis와 kafka
date: '2024-02-15'
tags: ['redis', 'kafka']
draft: false
summary: redis와 kafka를 비교
---

<TOCInline toc={props.toc} toHeading={4} />

## 게시/구독(Publish/Subscribe) 메시징

현대의 클라우드 아키텍처에서는 애플리케이션을 더 작고 독립적인 블록으로 분리하는 추세(**SOA or MSA**)  
이러한 분산 시스템에서는 실시간 이벤트 알림(**게시/구독(pub/sub) 메시징**)이 중요한 역할을 한다.  
`메시징 시스템을 구축`하는 데 있어 `Kafka와 Redis는` 두 가지 주요 대안으로 떠올랐다.

## redis

`Redis`는 In-memory key-value 데이터 스토어로 이벤트 발생 시  
게시자가 모든 구독자에게 메시지를 배포하는 `푸시 기반 시스템`을 지원합니다.

[redis 내용 정리](/blog/about-redis)

## apache kafka

`Kafka`는 스트림 처리 엔진으로 게시자와 구독자가 공통 메시지 대기열을 공유하여  
구독자가 필요에 따라 메시지를 가져오는 `풀 기반 시스템`을 지원합니다.

[Kafka 내용 정리](/blog/about-apache-kafka)

## redis, kafka 차이

### 작동 방식

- redis의 작동방식(워크플로우) 요약

  1. Redis는 `인 메모리 데이터베이스`로, `클라이언트-서버 아키텍처`를 사용한다.
  2. 생산자와 소비자는 서로 긴밀하게 연결되어 있으므로 메시지를 보낼 때 서로를 알 필요가 없다.
  3. 키와 기본-보조 노드를 사용하여 메시지를 그룹화하고 복제한다.
  4. 생산자가 메시지를 보내면 Redis는 해당 메시지 키를 확인하여 연결된 모든 가입자에게 메시지를 전달한다.
  5. 소비자는 메시지를 수신하기 위해 Redis 서버와의 활성 연결을 유지해야 하며, 이를 `연결된 전송 체계`로 구현한다.

- kafka의 작동방식(워크플로우) 요약

  1.  Kafka는 이벤트 스트리밍 플랫폼으로, 여러 애플리케이션 간에 데이터를 스트리밍한다.
  2.  클러스터를 통해 브로커들이 연결되어 있으며, 각 브로커는 다른 서버에 위치한다.
  3.  주제와 파티션을 생성하여 데이터를 그룹화하고, 파티셔닝을 통해 데이터를 분산 및 복제하여 내결함성을 보장한다.
  4.  생산자는 브로커에게 메시지를 게시하고, 브로커는 해당 메시지를 주제에 분류하고 파티션에 저장힌다.
  5.  소비자는 주제에 연결하여 해당 파티션에서 데이터를 추출한다.

### 메시지 처리

1. 메시지 크기
2. 메시지 전송
3. 메시지 보존
4. 오류 처리

### 성능

1. 병렬처리
2. 처리량
3. 지연시간
4. 내결함성

### 요약

## 사용시기

그렇다면 redis와 kafka는 언제 사용하면 될까?
